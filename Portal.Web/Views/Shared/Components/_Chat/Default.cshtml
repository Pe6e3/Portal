@using Portal.DAL.Entities;
@model List<Message>



@foreach (Message message in Model)
{

    @if (ViewBag.UserId == message.UserId)
    {

        <div class="col-12 messageline_fromuser">

            <div class="message">
                <div class="tablet">
                    <div class="msg_text">@message.TextMessage</div>
                    <div class="msg_info">@message.SentAt</div>
                </div>
            </div>
        </div>
    }
    else
    {

        <div class="col-12">

            <div class="message">
                <div class="msg_avatar">
                    <img src="/img/uploads/Profiles/@message.User.Profile.AvatarImg" class="avatarimg" />
                </div>
                <div class="tablet">
                    <div class="msg_text">@message.TextMessage</div>
                    <div class="msg_info">@message.SentAt</div>
                </div>
            </div>
        </div>
    }

}

<div class="chat-form">
    <form asp-controller="Chats" asp-action="AddMessage">
        <input type="hidden" name="ChatId" value="@ViewBag.ChatId" />
        <input type="hidden" name="UserId" value="@ViewBag.UserId" />

        <div class="row">
            <div class="col-1 d-flex align-items-center justify-content-center">
                <img src="~/img/uploads/Profiles/@ViewBag.Avatar" style="height:80px; border-radius:5px;" />
            </div>

            <div class="col-10">
                <div class="messagebox">
                    <textarea name="TextMessage" placeholder="Ваше сообщение..."></textarea>
                </div>
            </div>
            <div class="col-1">
                <button class="addmessage-btn" type="submit"><i class="fa-solid fa-arrow-right"></i></button>
            </div>
        </div>


    </form>
</div>

<link rel="stylesheet" href="~/user/css/chat.css" asp-append-version="true" />
